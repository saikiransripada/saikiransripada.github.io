function timeAgo(e){var t=[{name:"second",limit:60,in_seconds:1},{name:"minute",limit:3600,in_seconds:60},{name:"hour",limit:86400,in_seconds:3600},{name:"day",limit:604800,in_seconds:86400},{name:"week",limit:2629743,in_seconds:604800},{name:"month",limit:31556926,in_seconds:2629743},{name:"year",limit:null,in_seconds:31556926}],n=(new Date-new Date(1e3*e))/1e3;if(n<5)return"now";for(var s,i=0;s=t[i++];)if(n<s.limit||!s.limit)return(n=Math.floor(n/s.in_seconds))+" "+s.name+(n>1?"s":"")+" ago"}var url="https://ws.audioscrobbler.com/2.0?method=user.getRecentTracks&user=thephpguy&limit=1&api_key=c614552cd7d82790915fc72f629b9ebe&format=json",getJSON=function(e,t){var n=new XMLHttpRequest;n.open("GET",e,!0),n.responseType="json",n.onload=function(){var e=n.status;200===e?t(null,n.response):t(e,n.response)},n.send()};getJSON(url,function(e,t){if(null!==e)console.log("Something went wrong: "+t.message);else{var n="",s=t.recenttracks.track[0],i=s.name,r=s.artist["#text"],a=(s.album["#text"],s.image[3]["#text"],s.url,'<li><img src="/assets/img/headphones.emoji.svg" class="emoji-big"> <span>Listening to</span> ');n+=a+"<em><strong>"+i+"</strong> by <strong>"+r+"</strong></em>",n+=s["@attr"]?" <small>right now</small></li>":" <small>"+timeAgo(s.date.uts)+"</small></li>",t.recenttracks.track[1]?(recenttrack=t.recenttracks.track[1],n+=a+"<em><strong>"+recenttrack.name+"</strong> by <strong>"+recenttrack.artist["#text"]+"</strong></em>",n+=" <small>"+timeAgo(recenttrack.date.uts)+"</small></li>"):n+="<li>&nbsp;</li>",document.getElementById("listening-to").innerHTML=n}});